<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- 
	//게시물 개수
	int getCount(String field, String query);
	
	//전체 게시물
	List<Board> getBoards(int page, String field, String query);
	
	
	//게시물 삭제
	int delete(String seq);
	
	//게시물 수정
	int update(Board board);
	
	//게시물 상세
	Board boardDetail(String seq);
	
	//게시물 입력
	int insert(Board n);
 -->
 
 <mapper namespace="dao.NoticeDao">
 
 <select id="getCount" resultType="int">
 	select count(*) from notices where ${param1} like '%${param2}%'
 </select>
 
 <select id="getBoards" resultType="dto.Board">
	SELECT * FROM
		(SELECT ROWNUM NUM, N.*
			FROM(
				SELECT *
				FROM board
				WHERE ${param2} LIKE '%${param3}%' ORDER BY REGDATE DESC
			) N
		) WHERE NUM BETWEEN 1 + (${param1} -1)*5 AND 5 + (${param1}-1)*5
 </select>
 
 <delete id="delete">
 	DELETE FROM board where seq=#{seq}
 </delete>
 
 <update id="update" parameterType="dto.Board">
 UPDATE board
 SET title=#{title},
 	 content=#{content},
 	 filesrc=#{filesrc, jdbcType = VARCHAR},
 	 filesrc2=#{filesrc2, jdbcType = VARCHAR}
 WHERE seq=#{seq}
 </update>
 
 <select id="boardDetail" resultType="dto.Board">
 	SELECT title,
 			writer,
 			content,
 			regdate,
 			hit,
 			filesrc,
 			filesrc2
    FROM board where seq=#{seq}
 </select>
 
 <insert id="insert" parameterType="int">
 	INSERT INTO board(seq, title, content, writer, regdate, hit, filesrc, filesrc2)
 	VALUES (#{seq}, #{title}, #{content}, #{writer}, sysdate, 0, #{filerc}, #{filesrc2})
 </insert>
 </mapper>